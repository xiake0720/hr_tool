import { createI18n } from "vue-i18n";

const STORAGE_KEY = "locale";

const messages = {
  "zh-CN": {
    common: {
      appName: "HT Tools 管理台",
      localWorkspace: "本地工作区",
      me: "我的",
      users: "用户",
      org: "组织",
      roles: "角色",
      loading: "加载中...",
      noData: "暂无数据",
      retry: "重试",
      close: "关闭",
      saveSoon: "保存（即将支持）",
      formPlaceholder: "表单字段后续补充。",
      formTitle: "表单",
      connected: "已连接",
      totalUsers: "用户总数",
      orgNodes: "组织节点",
      rolesCount: "角色",
      permissionsCount: "权限",
      newUser: "新建用户",
      newNode: "新建节点",
      newRole: "新建角色",
      switchToken: "切换 Token",
      language: "语言",
      enabled: "启用",
      disabled: "禁用",
      id: "ID",
      login: "登录名",
      code: "编码",
      name: "名称",
      email: "邮箱",
      action: "动作",
      status: "状态",
      requestId: "请求ID",
      externalSub: "外部主体",
      username: "用户名",
      token: "Token",
      saveToken: "保存 Token",
      tokenLogin: "Token 登录",
      pasteJwt: "粘贴 JWT 以访问网关 IAM 接口。",
      placeholderToken: "Bearer token",
      iamConsole: "IAM 控制台",
      iamSubtitle: "网关 + IAM 连通性检查",
      currentUser: "当前用户",
      meSubtitle: "验证 /api/me 连通性与 ApiResponse 解析。",
      usersSubtitle: "读取 /api/users 分页结果。",
      orgSubtitle: "读取 /api/org-units/tree。",
      rolesSubtitle: "读取 /api/roles 与 /api/permissions。",
      noUsers: "暂无用户返回。",
      noOrg: "暂无组织节点返回。",
      noRoles: "暂无角色返回。",
      noPermissions: "暂无权限返回。",
      formTitleUser: "新建用户",
      formTitleOrg: "新建组织节点",
      formTitleRole: "新建角色",
      errorLoadMe: "加载 /api/me 失败",
      errorLoadUsers: "加载 /api/users 失败",
      errorLoadOrg: "加载 /api/org-units/tree 失败",
      errorLoadRoles: "加载角色或权限失败",
      accessDenied: "无权限",
      pleaseLogin: "请登录",
      requestFailed: "请求失败",
      networkError: "网络错误",
      unauthorized: "未授权",
      forbidden: "禁止访问",
      languageZh: "中文",
      languageEn: "English"
    },
    toast: {
      info: "提示",
      warning: "警告",
      error: "错误",
      success: "成功"
    }
  },
  "en-US": {
    common: {
      appName: "HT Tools Admin",
      localWorkspace: "local workspace",
      me: "Me",
      users: "Users",
      org: "Org",
      roles: "Roles",
      loading: "Loading...",
      noData: "No data yet",
      retry: "Retry",
      close: "Close",
      saveSoon: "Save (soon)",
      formPlaceholder: "Form fields will be added here later.",
      formTitle: "Form",
      connected: "Connected",
      totalUsers: "Total users",
      orgNodes: "Org nodes",
      rolesCount: "Roles",
      permissionsCount: "Permissions",
      newUser: "New User",
      newNode: "New Node",
      newRole: "New Role",
      switchToken: "Switch Token",
      language: "Language",
      enabled: "Enabled",
      disabled: "Disabled",
      id: "ID",
      login: "Login",
      code: "Code",
      name: "Name",
      email: "Email",
      action: "Action",
      status: "Status",
      requestId: "RequestId",
      externalSub: "ExternalSub",
      username: "Username",
      token: "Token",
      saveToken: "Save Token",
      tokenLogin: "Token Login",
      pasteJwt: "Paste a JWT to access IAM APIs through the gateway.",
      placeholderToken: "Bearer token",
      iamConsole: "IAM Console",
      iamSubtitle: "Gateway + IAM connectivity check",
      currentUser: "Current User",
      meSubtitle: "Verify /api/me connectivity and ApiResponse parsing.",
      usersSubtitle: "Reading /api/users page response.",
      orgSubtitle: "Reading /api/org-units/tree.",
      rolesSubtitle: "Reading /api/roles and /api/permissions.",
      noUsers: "No users returned.",
      noOrg: "No org nodes returned.",
      noRoles: "No roles returned.",
      noPermissions: "No permissions returned.",
      formTitleUser: "Create User",
      formTitleOrg: "Create Org Node",
      formTitleRole: "Create Role",
      errorLoadMe: "Failed to load /api/me",
      errorLoadUsers: "Failed to load /api/users",
      errorLoadOrg: "Failed to load /api/org-units/tree",
      errorLoadRoles: "Failed to load role or permission data",
      accessDenied: "Access denied",
      pleaseLogin: "Please login",
      requestFailed: "Request failed",
      networkError: "Network error",
      unauthorized: "Unauthorized",
      forbidden: "Forbidden",
      languageZh: "中文",
      languageEn: "English"
    },
    toast: {
      info: "Info",
      warning: "Warning",
      error: "Error",
      success: "Success"
    }
  }
};

const savedLocale = localStorage.getItem(STORAGE_KEY) ?? "zh-CN";

const i18n = createI18n({
  legacy: false,
  locale: savedLocale,
  fallbackLocale: "zh-CN",
  messages
});

export function setLocale(locale: string): void {
  i18n.global.locale.value = locale;
  localStorage.setItem(STORAGE_KEY, locale);
}

export default i18n;
