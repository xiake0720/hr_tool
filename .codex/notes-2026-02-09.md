# 今日工作记录（2026-02-09）

## 目标
- 统一自研组件体系样式与交互，修复筛选区与弹层宽度问题
- 候选人列表页结构与体验优化

## 主要完成内容
- 统一输入类组件宽度与尺寸策略：
  - 新增全局控件宽度与面板变量（tokens）
  - Input/Select/DateRange 默认宽度统一（240px），支持 size=sm/lg 与 fullWidth
- 修复 Select/DateRange 触发器与可点击区域不一致、弹层横向滚动：
  - Popover trigger 支持 fullWidth，面板 max-width/max-height 及 overflow 策略
  - Select/DateRange 控件宽度与文本省略规则统一
- FilterBar 布局与换行问题修复：
  - 字段采用 flex 布局（label 不换行、control 不被挤压）
  - actions 独立区域，不挤压字段
- CandidatesListPage 结构调整：
  - 使用 PageHeader、FilterBar、DataTablePro
  - 表格列完善与操作区补齐（查看/评估/推进阶段）
  - TaskCenter 改为右下角胶囊折叠面板（不遮挡分页）

## 关键修改文件
- tokens & 基础样式
  - `web-frontend/src/styles/tokens.css`
  - `web-frontend/src/styles/base.css`
- UI 基础组件
  - `web-frontend/src/components/ui/Popover.vue`
  - `web-frontend/src/components/ui/Input.vue`
  - `web-frontend/src/components/ui/Select.vue`
  - `web-frontend/src/components/ui/DateRange.vue`
  - `web-frontend/src/components/ui/Table.vue`
- 通用业务组件
  - `web-frontend/src/components/common/FilterBar.vue`
  - `web-frontend/src/components/common/DataTablePro.vue`
  - `web-frontend/src/components/common/TaskCenter.vue`
  - `web-frontend/src/components/common/PageHeader.vue`
  - `web-frontend/src/components/common/EntityDetailDrawer.vue`
  - `web-frontend/src/components/common/Uploader.vue`
  - `web-frontend/src/components/common/StatusPill.vue`
  - `web-frontend/src/components/common/PermissionGate.vue`
- 候选人页面
  - `web-frontend/src/pages/candidates/CandidatesListPage.vue`

## 关键实现点（便于接续）
- 控件默认宽度变量（tokens）：
  - `--control-h: 36px`
  - `--control-w: 240px`
  - `--control-w-sm: 180px`
  - `--control-w-lg: 320px`
  - `--panel-max-w: 420px`
  - `--panel-max-h: 320px`
- Popover：
  - trigger 默认收缩，`fullWidth` 时 width=100%
  - 面板 max-width/max-height + overflow 策略，z-index 使用 `--z-dropdown`
- Select/DateRange：
  - 可见控件宽度=点击区域宽度=占位宽度
  - 文本省略（ellipsis），chevron 固定宽度
  - DateRange 面板 min-width 280，禁止横向滚动
- FilterBar：
  - `.ui-filter__field { display:flex; align-items:center; gap: var(--space-3); }`
  - `.ui-filter__label { white-space: nowrap; flex:0 0 auto; }`
  - `.ui-filter__control { flex:1 1 auto; min-width:0; }`

## 待确认/下一步建议
- 如果仍有宽度/弹层偏移问题，可在 Popover 中加入对视口边界的 clamp
- 如需统一 DatePicker/Select 的键盘交互与 focus ring，可进一步抽象
