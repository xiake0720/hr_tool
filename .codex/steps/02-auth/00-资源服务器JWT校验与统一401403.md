# Step 10：资源服务器 JWT 校验与统一 401/403 响应

## CODEX 执行指令（必须严格照做）
让 iam-service 成为 OAuth2 Resource Server（JWT），并且未登录返回 AUTH_4001，权限不足返回 AUTH_4003，统一 ApiResponse 格式。UTF-8（无 BOM）。

### 任务清单
1）配置 Spring Security：
- 启用 resource server jwt
- 支持 `issuer-uri` 或 `jwk-set-uri`（用配置项占位）
  2）实现：
- AuthenticationEntryPoint：401 返回 ApiResponse(code=AUTH_4001)
- AccessDeniedHandler：403 返回 ApiResponse(code=AUTH_4003)
  3）安全策略：
- `/api/health`、`/api/ping/**`（可选）允许匿名（仅本地调试）
- 其余 `/api/**` 默认需要认证（后续再细分）

### 交付物
- SecurityConfig
- 401/403 handler
- application.yml 增加 oauth2 配置占位

### 验收（你必须给出）
- 不带 token：
    - `curl http://localhost:8081/api/me` -> 401 + AUTH_4001（即使 /api/me 还没实现，也先用一个受保护路径验证）
- 带 token 但无权限（后续 step 完整实现后再验证 403）

### 禁止扩展
- 不做后端用户名密码登录
- 不把鉴权逻辑写到 controller
